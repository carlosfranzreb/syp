{% extends 'main_layout.html' %}
{% block content %}
  <section>
    <header class="main">
      <h1>Buscar por tiempo</h1>
      <h4>¿Cuánto tiempo tienes?</h4>
    </header>
    <div class="container" style="max-width: 400px">
      <form method="post">
        <div class="row">
          <div class="col-sm">
            {% if form.time.errors %}
              {{ form.time(class="is-invalid") }}
              <div class="invalid-feedback">
                <span style="color: #991D1D">¡Escribe un número!</span>
              </div>
            {% else %}
              {{ form.time(placeholder="En minutos.", style="margin: 0 0 5px 0; min-width: 140px") }}
            {% endif %}
          </div>
          <div class="col-sm">
            {{ form.submit }}
          </div>
        </div>
      </form>
    </div>
  </section>

  {% if recipes is not none %}
    <section>
    	<header class="major">
    		<h2>Recetas en menos de {{title}}</h2>
    	</header>
    	<div class="posts">

        {% for recipe in recipes.items %}
          <article>
      			<a href="{{ url_for('recipes.get_recipe', recipe_name=recipe.name.replace(' ', '_')) }}" class="image"><img src="{{ url_for('static', filename='images/recipes/600/' + '_'.join(recipe.name.lower().replace("ñ", "n").split(' '))) + '_600_opt.jpg' }}" alt="{{ recipe.name }}" /></a>
      			<h3>{{ recipe.name }} - {{ recipe.time_cook + recipe.time_prep }} minutos</h3>
      			<p>{{ recipe.intro }}</p>
      			<ul class="actions">
      				<li><a href="{{ url_for('recipes.get_recipe', recipe_name=recipe.name.replace(' ', '_')) }}" class="button">Abrir</a></li>
      			</ul>
      		</article>
        {% endfor %}
    	</div>

      <center>
        {% for page_num in recipes.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
          {% if page_num %}
            {% if recipes.page == page_num %}
              <a class="btn btn-danger mb-4" href="{{ url_for('times.search_time', time=time, page=page_num) }}">{{ page_num }}</a>
            {% else %}
              <a class="btn btn-outline-danger mb-4" href="{{ times.url_for('search_time', time=time, page=page_num) }}">{{ page_num }}</a>
            {% endif %}
          {% else %}
            ...
          {% endif %}
        {% endfor %}
      </center>

    </section>
  {% endif %}
{% endblock %}
